apply plugin: 'scala'

repositories {
	mavenCentral()
}

sourceSets {
	main {
		scala {
			srcDirs += 'build/twirl'
		}
	}
}

def javaVersion = '1.8'

def scalaVersion = '2.11.8'
def scalaAbiVersion = '2.11'

def playVersion = '2.4.3'

dependencies {
	compile "org.scala-lang:scala-library:${scalaVersion}"
	compile "com.typesafe.play:play-java_${scalaAbiVersion}:${playVersion}"
}

task compilePlayTwirlTemplates(type: TwirlCompile) {
	
	setPlatform([
		getJavaPlatform: {javaVersion},
		getPlayVersion: {playVersion},
		getScalaPlatform: {[
			getScalaCompatibilityVersion: {scalaAbiVersion},
			getScalaVersion: {scalaVersion}
		] as ScalaPlatform}
	] as PlayPlatform)
	
	defaultImports = 'JAVA'
	
	source = files('src/main/twirl')
	include '**/*.scala.xml'
	
	outputDirectory = file('build/twirl')
}

compileScala.dependsOn(compilePlayTwirlTemplates)